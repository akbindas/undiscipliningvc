var Carousel=function(t){this.domNode=t,this.items=[],this.firstItem=null,this.lastItem=null,this.currentDomNode=null,this.liveRegionNode=null,this.currentItem=null,this.pauseButton=null,this.playLabel="Start automatic slide show",this.pauseLabel="Stop automatic slide show",this.rotate=!0,this.hasFocus=!1,this.hasHover=!1,this.isStopped=!1,this.timeInterval=3e3};Carousel.prototype.init=function(){var t,e,s,i,o,a,h;for(this.liveRegionNode=this.domNode.querySelector(".carousel-items"),i=this.domNode.querySelectorAll(".carousel-item"),h=0;h<i.length;h++)(o=new CarouselItem(i[h],this)).init(),this.items.push(o),this.firstItem||(this.firstItem=o,this.currentDomNode=o.domNode),this.lastItem=o,(a=i[h].querySelectorAll(".carousel-image a"))&&a[0]&&(a[0].addEventListener("focus",this.handleImageLinkFocus.bind(this)),a[0].addEventListener("blur",this.handleImageLinkBlur.bind(this)));for(t=document.querySelectorAll(".carousel .controls button"),h=0;h<t.length;h++)(e=t[h]).classList.contains("rotation")?(s=new PauseButton(e,this),this.pauseButton=e,this.pauseButton.classList.add("pause"),this.pauseButton.setAttribute("aria-label",this.pauseLabel)):s=new CarouselButton(e,this),s.init();this.currentItem=this.firstItem,this.domNode.addEventListener("mouseover",this.handleMouseOver.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseOut.bind(this)),setTimeout(this.rotateSlides.bind(this),this.timeInterval)},Carousel.prototype.setSelected=function(t,e){"boolean"!=typeof e&&(e=!1);for(var s=0;s<this.items.length;s++)this.items[s].hide();this.currentItem=t,this.currentItem.show(),e&&this.currentItem.domNode.focus()},Carousel.prototype.setSelectedToPreviousItem=function(t,e){var s;"boolean"!=typeof e&&(e=!1),"object"!=typeof t&&(t=this.currentItem),t===this.firstItem?this.setSelected(this.lastItem,e):(s=this.items.indexOf(t),this.setSelected(this.items[s-1],e))},Carousel.prototype.setSelectedToNextItem=function(t,e){var s;"boolean"!=typeof e&&(e=!1),"object"!=typeof t&&(t=this.currentItem),t===this.lastItem?this.setSelected(this.firstItem,e):(s=this.items.indexOf(t),this.setSelected(this.items[s+1],e))},Carousel.prototype.rotateSlides=function(){this.rotate&&this.setSelectedToNextItem(),setTimeout(this.rotateSlides.bind(this),this.timeInterval)},Carousel.prototype.updateRotation=function(){this.hasHover||this.hasFocus||this.isStopped?(this.rotate=!1,this.liveRegionNode.setAttribute("aria-live","polite")):(this.rotate=!0,this.liveRegionNode.setAttribute("aria-live","off")),this.isStopped?(this.pauseButton.setAttribute("aria-label",this.playLabel),this.pauseButton.classList.remove("pause"),this.pauseButton.classList.add("play")):(this.pauseButton.setAttribute("aria-label",this.pauseLabel),this.pauseButton.classList.remove("play"),this.pauseButton.classList.add("pause"))},Carousel.prototype.toggleRotation=function(){this.isStopped?this.hasHover||this.hasFocus||(this.isStopped=!1):this.isStopped=!0,this.updateRotation()},Carousel.prototype.handleImageLinkFocus=function(){this.liveRegionNode.classList.add("focus")},Carousel.prototype.handleImageLinkBlur=function(){this.liveRegionNode.classList.remove("focus")},Carousel.prototype.handleMouseOver=function(t){this.pauseButton.contains(t.target)||(this.hasHover=!0),this.updateRotation()},Carousel.prototype.handleMouseOut=function(){this.hasHover=!1,this.updateRotation()},window.addEventListener("load",function(){for(var t=document.querySelectorAll(".carousel"),e=0;e<t.length;e++){new Carousel(t[e]).init()}},!1);